<%= tag.div(class: %w(table-responsive)) do %>
  <%= tag.table(id: 'character-table', class: %w(table table-sm)) do %>
    <%= tag.tr do %>
      <%= tag.th %>
      <%= tag.th(t('attributes.abbr.character.nym')) %>
      <% Character::TABLE_FIELDS.each do |field| %>
        <%= tag.th(t("attributes.abbr.character.#{field}"), class: %w(text-center),
                   title: t("attributes.full.character.#{field}")) %>
      <% end %>
    <% end %>
    <% @chars.each do |c| %>
      <% second_row = (c.notes && c.notes != "") %>
      <% tr_klass = c.highlight ? %w(table-info) : [] %>
      <% td_attrs = second_row ? { rowspan: 2 } : {} %>

      <%= tag.tr(class: tr_klass, data: { 'object-id': c.id }) do %>
        <%= tag.td(td_attrs) do %>
          <%= tag.i(class: %w(bi bi-pencil-fill text-primary edit-button)) %>
          <%= tag.i(class: %w(bi bi-trash-fill text-primary delete-button)) %>
        <% end %>
        <%= tag.td(c.nym, td_attrs) %>
        <% Character::TABLE_FIELDS.each do |meth| %>
          <%= tag.td(c.send(meth), class: %w(text-center)) %>
        <% end %>
      <% end %>

      <% if second_row %>
        <%= tag.tr(class: tr_klass, 'data-notes-id' => c.id) do %>
          <%= tag.td(c.notes, colspan: 30) %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
